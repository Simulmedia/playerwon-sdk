# PlayerWON SDK

PlayerWON® is the first engagement and monetization platform for free-to-play (F2P) console and PC games that lets players earn valuable rewards in exchange for watching premium brand-sponsored videos.
https://www.playerwon.com/

Please contact info@playerwon.com for further information.


## FClientDetails


### Description

Struct to store client details, generated by the developer, and passed into the API call, to retrieve an opportunity.  Only country, IDFA, Platform, and Language are required to retrieve an opportunity.


### Declaration


```
    FClientDetails(ESupportedCountries InCountry, FString InIDFA, ESupportedPlatform InPlatform, ESupportedLanguages InLanguage, FString InIP = "", int32 InWidth = 0, int32 InHeight = 0, FString InPlayerID = "",
        EPlayerIDType InPlayerIDType = EPlayerIDType::UnknownPIDType, FString InDevice = "", int32 InCOPPA = 0, int32 InUnderAge = 0, int32 InAge = 0, FString InSlotID = "", int32 InLifetimeSpending = 0, FCurrency InLifetimeSpendingValue = FCurrency(),
        TArray<FCurrency> InRewardValues = TArray<FCurrency>(), int32 InGameServer = 0, int32 InLimitTracking = 0, int32 InGDPR = 0, int32 InGDPRConsent = 0, bool InMediaFiles = false, int32 InMaxLength = 0)
```



### Parameters


<table>
  <tr>
   <th>Field Type</th>
   <th>Field Name</th>
   <th>Description</th>
  </tr>
  <tr>
   <td>ESupportedCountries</td>
   <td>InCountry</td>
   <td>Player's/client’s country</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InIDFA</td>
   <td>Player's/Client's Unique Identifier (not Gamertag)</td>
  </tr>
  <tr>
   <td>PlatformType</td>
   <td>InPlatform</td>
   <td>Player's/Client's gaming platform: android, ios, mac, pc, ps, switch, xbox, unknown</td>
  </tr>
  <tr>
   <td>ESupportedLanguages</td>
   <td>InLanguage</td>
   <td>Player's/Client's language</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InIP</td>
   <td>Player’s/Client's IP address</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InWidth</td>
   <td>Width of the screen in pixels</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InHeight</td>
   <td>Height of the screen in pixels</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InPlayerID</td>
   <td>Player's/Client's Gamertag</td>
  </tr>
  <tr>
   <td>EPlayerIDType</td>
   <td>InPlayerIDType</td>
   <td>Gamertag type (e.g. Microsoft, Steam, Epic)</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InDevice</td>
   <td>Player's/client’s device name</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InCOPPA</td>
   <td>Player's age: 0 = player is 13+, 1 = player is under the age of 13</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InUnderAge</td>
   <td>Player underage indicator: 0 = player is not underage, 1 = player is underage</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InAge</td>
   <td>Player’s age, in years</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InSlotID</td>
   <td>Game-specific value provided by PlayerWON</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InLifetimeSpending</td>
   <td>Lifetime spender: 0 = player has not made in-game purchages with real currency, 1 = player has made in-game purchases with real currency, at some point in time</td>
  </tr>
  <tr>
   <td>FCurrency</td>
   <td>InLifetimeSpendingValue</td>
   <td>Lifetime spend value. The currency value amount the player/client has spent in-game</td>
  </tr>
  <tr>
   <td>TArray<FCurrency></td>
   <td>InRewardValues</td>
   <td>An array of in-game rewards the player will receive for watching an ad</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InGameServer</td>
   <td>Game Server indicator: 0 = call is not being made from game server, 1 = call is being made from a game server</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InLimitTracking</td>
   <td>Limit tracking indicator: 0 = player has not opted for limited ad tracking, 1 = player has opted for limited ad tracking</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InGDPR</td>
   <td>GDPR indicator: 0 = player is not in a country under GDPR jurisdiction, 1 = player is in a country under GDPR jurisdiction</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InGDPRConsent</td>
   <td>GDPR consent indicator: 0 = player has not given consent, 1 = player has given consent. Only valid if _gdpr is 1</td>
  </tr>
  <tr>
   <td>bool</td>
   <td>InMediaFiles</td>
   <td>Media files indicator. If true, then all the encoded video URLs will be returned in the response. If false or not specified, then a single video URL will be returned</td>
  </tr>
  <tr>
   <td>int?</td>
   <td>InMaxLength</td>
   <td>Max length. This value represents the maximum time, in seconds, available for an ad to play. If specified, an ad of length equal to or less than this value will be returned</td>
  </tr>
</table>

## ESupportedCountries


### Description

Enumeration of supported countries.


### Declaration


```
ESupportedCountries
```



## EPlatformType


### Description

Enumeration of supported platforms.


### Declaration


```
EPlatformType
```



## ESupportedLanguages


### Description

Enumeration of supported languages.


### Declaration


```
ESupportedLanguages
```



## EPlayerGender


### Description

Enumeration used to indicate player's preferred gender identity.


### Declaration


```
EPlayerGender
```



## ECurrencyType


### Description

Enumeration of supported currency types.


### Declaration


```
ECurrencyType
```



## ESupportedCurrencies


### Description

Enumeration of supported currencies.


### Declaration


```
ESupportedCurrencies
```



## EPlayerIDType


### Description

Enumeration of supported PlayerID types.


### Declaration


```
EPlayerIDType
```



## EOpportunityAbortReasons


### Description

Enumeration of reasons for aborting an opportunity playback.


### Declaration


```
EOpportunityAbortReasons
```



## FOpportunity


### Description

Struct to contain data retrieved from the API in the `/opportunity` call, which includes the creative URL and receipt token.


### Declaration


```
FOpportunity()
```



### Properties


<table>
  <tr>
   <th>Field Visibility</th>
   <th>Field Name</th>
   <th>Description</th>
  </tr>
  <tr>
   <td>public</td>
   <td>CreativeURL</td>
   <td>Creative URL</td>
  </tr>
  <tr>
   <td>public</td>
   <td>Length</td>
   <td>Length of the creative (in seconds)</td>
  </tr>
  <tr>
   <td>public</td>
   <td>Receipt</td>
   <td>Receipt token for the creative</td>
  </tr>
</table>



## FCurrency


### Description

Struct that describes currency


### Declaration


```
FCurrency(ESupportedCurrencies InName, int32 InValue, int32 DecimalPlace, int32 Type, FString CustomName = "")
```



### Parameters


<table>
  <tr>
    <th>Field Type</th>
    <th>Field Name</th>
    <th>Description</th>
  </tr>
  <tr>
   <td>SupportedCurrencies</td>
   <td>InName</td>
   <td>Currency name</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InValue</td>
   <td>The number of currency units.</td>
  </tr>
  <tr>
   <td>int</td>
   <td>DecimalPlace</td>
   <td>The number digits of `value` to place, after the decimal point.</td>
  </tr>
  <tr>
   <td>CurrencyType</td>
   <td>Type</td>
   <td>The type of currency</td>
  </tr>
  <tr>
   <td>string</td>
   <td>CustomName</td>
   <td>(<strong>Optional</strong>) An optional string that will be used if currency is set to InGame.</td>
  </tr>
</table>

**Examples**:
- To indicate $100.00 USD:
  - InName: `SupportedCurrencies.United_States_Dollar`
  - InValue: `10000`
  - DecimalPlace: `2`
  - Type: `CurrencyType.Real`
  - CustomName: ``
- To indicate 123.456 in-game "Unicorn Kopeks":
  - InName: `SupportedCurrencies.In_Game`
  - InValue: `123456`
  - DecimalPlace: `3`
  - Type: `CurrencyType.Virtual`
  - CustomName: `"Unicorn Kopeks"`


## FSessionDetails


### Description

Struct to contain details about the player's/client’s session


### Declaration


```
FSessionDetails(ESupportedCountries InCountry, ESupportedPlatform InPlatform, ESupportedLanguages InLanguage, FString InPlayerID = "", EPlayerIDType InPlayerIDType = EPlayerIDType::UnknownPIDType, FString InDevice = "", int32 InCOPPA = 0,
    int32 InUnderAge = 0, int32 InAge = 0, int32 InMinAge = 0, int32 InMaxAge = 0, TEnumAsByte<EPlayerGender> InGender = EPlayerGender::n, int32 InLifetimeSpending = 0, FCurrency InLifetimeSpendingValue = FCurrency(), FString InPlayerFirstPlayedDate = "", int32 InGameServer = 0,
    int32 InLimitTracking = 0, int32 InGDPR = 0, int32 InGDPRConsent = 0)
```



### Parameters


<table>
  <tr>
   <th>Field Type</th>
   <th>Field Name</th>
   <th>Description</th>
  </tr>
  <tr>
   <td>ESupportedCountries</td>
   <td>InCountry</td>
   <td>Player's country</td>
  </tr>
  <tr>
   <td>EPlatformType</td>
   <td>InPlatform</td>
   <td>Player's gaming platform</td>
  </tr>
  <tr>
   <td>ESupportedLanguages</td>
   <td>InLanguage</td>
   <td>Player's language</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InPlayerID</td>
   <td>Player's Gamertag</td>
  </tr>
  <tr>
   <td>EPlayerIDType</td>
   <td>InPlayerIDType</td>
   <td>Player's Gamertag type</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InDevice</td>
   <td>Player's device</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InCOPPA</td>
   <td>0 indicates the player is 13 and above, 1 indicates the player is under the age of 13</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InUnderAge</td>
   <td>0 indicates the player is underage</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InAge</td>
   <td>The player’s age in years</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InMinAge</td>
   <td>The minimum age the player can be</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InMaxAge</td>
   <td>The maximum age the player can be</td>
  </tr>
  <tr>
   <td>EPlayerGender</td>
   <td>InGender</td>
   <td>The player/client’s gender</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InLifetimeSpending</td>
   <td>Lifetime Spending. 1 indicates the player has spent real money in-game in their lifetime. 0 indicates they have not.</td>
  </tr>
  <tr>
   <td>Currency</td>
   <td>InLifetimeSpendingValue</td>
   <td>Lifetime Spending Value. The value the player/client has spent in-game</td>
  </tr>
  <tr>
   <td>string</td>
   <td>InPlayerFirstPlayedDate</td>
   <td>The date the player played the game, written as "yyyy-mm-dd"</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InGameServer</td>
   <td>1 indicates the calls are being made from a game server, 0 indicates they are not being made from a game server</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InLimitTracking</td>
   <td>Limit tracking indicator: 0 = player has not opted for limited ad tracking, 1 = player has opted for limited ad tracking</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InGDPR</td>
   <td>GDPR indicator: 0 = player is not in a country under GDPR jurisdiction, 1 = player is in a country under GDPR jurisdiction</td>
  </tr>
  <tr>
   <td>int</td>
   <td>InGDPRConsent</td>
   <td>GDPR consent indicator: 0 = player has not given consent, 1 = player has given consent. Only valid if _gdpr is 1</td>
  </tr>
</table>



## PlayerWONBridge


### Description

An AActor class that acts as the main driver for the PlayerWON SDK. All API calls and functionality are handled by the Bridge.


### Declaration


```
class APlayerWONBridge : public AActor
```



### Properties


<table>
  <tr>
   <th>Field Type</th>
   <th>Field Name</th>
   <th>Description</th>
  </tr>
  <tr>
   <td>bool</td>
   <td>bUsePhysicalMedia</td>
   <td>Dictates whether the Bridge will use media stored within the project/plugin or if it will try to get media through an opportunity call to the API</td>
  </tr>
  <tr>
   <td>UMediaPlayer*</td>
   <td>MediaPlayer</td>
   <td>A pointer to the MediaPlayer the Bridge will use to display the opportunity</td>
  </tr>
  <tr>
   <td>UMediaSource*</td>
   <td>DefaultMediaSource</td>
   <td>The default media source that comes with the plugin</td>
  </tr>
</table>



## Events


### Description

These are events that drive the PlayerWON plugin


<table>
  <tr>
   <th>Field Type(s)</th>
   <th>Field Name</th>
   <th>Description</th>
  </tr>
  <tr>
   <td>FAuthorizatonSuccessful</td>
   <td>AuthorizationSuccessfulEvent</td>
   <td>Event that is broadcast when authorization from the API has been achieved</td>
  </tr>
  <tr>
   <td>FOpportunityRetrieved</td>
   <td>OpportunityRetrievedEvent</td>
   <td>Event that is broadcast when an Opportunity has been successfully retrieved from the API</td>
  </tr>
  <tr>
   <td>FOpportunityStarted</td>
   <td>OpportunityStartedEvent</td>
   <td>Event that is broadcast when the ad has started playing</td>
  </tr>
  <tr>
   <td>FOpportunityProgress</td>
   <td>OpportunityProgressEvent</td>
   <td>Event that is broadcast when the ad has reached the 25%, 50%, and 75% marks of the it’s playback.</td>
  </tr>
  <tr>
   <td>FOpportunityCompleted</td>
   <td>OpportunityCompletedEvent</td>
   <td>Event that is broadcast when the ad has completed playback</td>
  </tr>
  <tr>
   <td>FOpportunityStopped</td>
   <td>OpportunityStoppedEvent</td>
   <td>Event that is broadcast when the ad has been aborted</td>
  </tr>
  <tr>
   <td>void</td>
   <td>VideoPrepared</td>
   <td>Event that is invoked when the ad has been prepared in the VideoPlayer</td>
  </tr>
</table>


### Methods

Initialize the Bridge with the player's IDFA


```
void InitBridge(FString InIDFA);
```

Using the given parameters, attempt to authorize the client for opportunities via API calls


```
void AuthorizeClient(FString ServerURL, FString ClientID, FString ClientSecret, FString TID);
```

Sets an internally stored FClientDetails struct


```
void SetClientDetails(FClientDetails InClientDetails);
```

Attempts to get an opportunity using API calls. MUST HAVE AUTHORIZATION TOKEN.


```
void RetrieveOpportunity(FString Token = "", FClientDetails Details = FClientDetails());
```

Attempts to send session details from the client via API calls


```
void CallSession(FSessionDetails Details, FString Token = "");
```

Plays the ad


```
void PlayOpportunity();
```

Stops the ad


```
void StopOpportunity(EReasonForAbort Reason);
```

Returns the percentage of progress in the ad as a float


```
float GetAdPercentageRaw();
```

Returns the percentage of progress in the ad as an int32


```
int32 GetAdPercentageInt();
```

## TelemetryComponent

### Description

A UActorComponent class that collects and send telemtry data as well as handles all error handling


### Declaration


```
class UTelemetryComponent : public UActorComponent
```



### Properties


<table>
  <tr>
   <th>Field Type</th>
   <th>Field Name</th>
   <th>Description</th>
  </tr>
  <tr>
   <td>bool</td>
   <td>bSendTelemetryData</td>
   <td>Dictates whether or not to send telemetry data</td>
  </tr>
  <tr>
   <td>bool</td>
   <td>bSendStackTraceWithTelemetry;</td>
   <td>Dictates whether or not to send a full stack trace with telemetry</td>
  </tr>
</table>

### Events

<table>
  <tr>
   <th>Field Type(s)</th>
   <th>Field Name</th>
   <th>Description</th>
  </tr>
  <tr>
   <td>FErrorCaught</td>
   <td>ErrorCaughtEvent</td>
   <td>Event that is broadcast when an error has been caught from the plugin or the API</td>
  </tr>
 </table>

### Methods

Initializes the TelemetryComponent with an initial message, usually about session details.

```
void InitializeTelemetry(FInitializeMessage InitMessage);
```

Method that broadcasts ErrorCaughtEvent, logs an error with a custom message in UnrealEngine's output, and if bSendTelemetryData is true, sends a message about the error along with useful information to the API

```
void CatchError(FString Message);
```

## PlayerWONFunctionLibrary

### Description

A BlueprintFunctionLibrary used to generate needed structs in a blueprint environment


### Declaration


```
class UPlayerWONFunctionLibrary : public UBlueprintFunctionLibrary
```

